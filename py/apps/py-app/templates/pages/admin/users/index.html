{% extends "layouts/admin.html" %}

{% block title %}Users - Admin{% endblock %}

{% block content %}
<div class="space-y-6">
    <div class="flex items-center justify-between">
        <div>
            <h1 class="text-2xl font-bold">User Management</h1>
            <p class="text-muted-foreground">{{ total_count }} total users</p>
        </div>
    </div>

    <!-- Search -->
    <div class="uk-card uk-card-default uk-card-body">
        <form hx-get="/_admin/users"
              hx-target="#users-table"
              hx-push-url="true"
              hx-swap="innerHTML"
              class="flex gap-2">
            <input type="text"
                   name="search"
                   value="{{ search }}"
                   class="uk-input flex-1"
                   placeholder="Search by email..." />
            <button type="submit" class="uk-button uk-button-primary">
                <uk-icon icon="search" class="w-4 h-4"></uk-icon>
                Search
            </button>
            {% if search %}
            <a href="/_admin/users"
               hx-get="/_admin/users"
               hx-target="#users-table"
               hx-push-url="true"
               class="uk-button uk-button-default">
                Clear
            </a>
            {% endif %}
        </form>
    </div>

    <!-- Users Table -->
    <div id="users-table">
        {% include "pages/admin/users/table.html" %}
    </div>
</div>
{% endblock %}
